<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Å½odÅ¾iÅ³ rÅ«Å¡iuoklis</title>
    <style>
        body { font-family: Arial, sans-serif; font-size: 18px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); margin: 0; padding: 20px; min-height: 100vh; }
        .container { max-width: 1000px; margin: 0 auto; background: white; border-radius: 20px; padding: 30px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); }
        .header { text-align: center; margin-bottom: 20px; }
        .header h1 { color: #333; margin-bottom: 10px; font-size: 28px; }
        .header p { color: #666; font-size: 18px; }
        .progress-bar { background: #f0f0f0; height: 8px; border-radius: 4px; margin: 15px 0; overflow: hidden; }
        .progress-fill { background: linear-gradient(45deg, #4CAF50, #45a049); height: 100%; width: 0%; transition: width 0.5s ease; }
        .score { background: #e3f2fd; border-radius: 10px; padding: 15px; text-align: center; margin: 15px 0; }
        .score h3 { color: #1565c0; margin-bottom: 8px; font-size: 18px; }
        .game-area { display: grid; grid-template-columns: 1fr 2fr; gap: 25px; margin: 20px 0; }
        .words-pool { background: #f8f9fa; border-radius: 15px; padding: 20px; min-height: 320px; }
        .words-pool h3 { text-align: center; color: #333; margin-bottom: 15px; font-size: 20px; }
        #wordsContainer { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        .word-item { background: white; border: 2px solid #ddd; border-radius: 10px; padding: 12px; margin: 4px 0; text-align: center; font-size: 18px; font-weight: bold; cursor: grab; transition: all 0.3s ease; user-select: none; }
        .word-item:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .sorting-boxes { display: grid; grid-template-rows: repeat(3, 1fr); gap: 12px; }
        .drop-box { border: 3px dashed #ddd; border-radius: 12px; padding: 12px; text-align: center; min-height: 70px; transition: all 0.3s ease; }
        .drop-box.noun { background: linear-gradient(135deg, #e3f2fd, #bbdefb); border-color: #2196f3; }
        .drop-box.adjective { background: linear-gradient(135deg, #e8f5e8, #c8e6c9); border-color: #4caf50; }
        .drop-box.verb { background: linear-gradient(135deg, #ffebee, #ffcdd2); border-color: #f44336; }
        .drop-box h3 { font-size: 18px; margin-bottom: 4px; }
        .drop-box .description { font-size: 16px; opacity: 0.8; margin-bottom: 8px; }
        .dropped-words { display: flex; flex-wrap: wrap; gap: 6px; justify-content: center; min-height: 35px; }
        .dropped-word { background: rgba(255,255,255,0.9); border-radius: 6px; padding: 4px 8px; font-size: 14px; font-weight: bold; border: 2px solid transparent; cursor: grab; }
        .dropped-word.correct { border-color: #4caf50; background: #e8f5e8; color: #2e7d32; }
        .dropped-word.incorrect { border-color: #f44336; background: #ffebee; color: #c62828; }
        .btn { background: linear-gradient(45deg, #667eea, #764ba2); color: white; border: none; padding: 12px 25px; border-radius: 8px; font-size: 16px; cursor: pointer; margin: 0 8px; }
        .controls { text-align: center; margin: 25px 0; }
        .feedback { text-align: center; margin: 15px 0; padding: 12px; border-radius: 8px; font-size: 16px; font-weight: bold; display: none; }
        .feedback.show { display: block; }
        .feedback.success { background: #d4edda; color: #155724; border: 2px solid #c3e6cb; }
        .results { background: #f8f9fa; border-radius: 15px; padding: 20px; text-align: center; display: none; }
        .results.show { display: block; }
        @media (max-width: 768px) { .game-area { grid-template-columns: 1fr; } #wordsContainer { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ Å½odÅ¾iÅ³ rÅ«Å¡iuoklis</h1>
            <p>Vilkite Å¾odÅ¾ius Ä¯ tinkamas spalvotas dÄ—Å¾utes!</p>
        </div>
        <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
        <div class="score">
            <h3>ğŸ“Š JÅ«sÅ³ rezultatas</h3>
            <p>Teisingai surÅ«Å¡iuota: <span id="correctCount">0</span> / <span id="totalWords">15</span> | Tikslumas: <span id="accuracy">0%</span></p>
        </div>
        <div class="game-area">
            <div class="words-pool">
                <h3>ğŸ“ Å½odÅ¾iai</h3>
                <div id="wordsContainer"></div>
            </div>
            <div class="sorting-boxes">
                <div class="drop-box noun" data-type="daiktavardis">
                    <h3>ğŸ“¦ DAIKTAVARDIS</h3>
                    <div class="description">Kas?</div>
                    <div class="dropped-words" id="nounBox"></div>
                </div>
                <div class="drop-box adjective" data-type="budvardis">
                    <h3>ğŸ¨ BÅªDVARDIS</h3>
                    <div class="description">Koks? Kokia?</div>
                    <div class="dropped-words" id="adjectiveBox"></div>
                </div>
                <div class="drop-box verb" data-type="veiksmaÅ¾odis">
                    <h3>âš¡ VEIKSMAÅ½ODIS</h3>
                    <div class="description">KÄ… veikia?</div>
                    <div class="dropped-words" id="verbBox"></div>
                </div>
            </div>
        </div>
        <div class="feedback" id="feedback"></div>
        <div class="controls">
            <button class="btn" onclick="checkAnswers()" id="checkBtn">âœ… Patikrinti atsakymus</button>
            <button class="btn" onclick="resetGame()" id="resetBtn">ğŸ”„ PradÄ—ti iÅ¡ naujo</button>
        </div>
        <div class="results" id="results">
            <h2>ğŸ‰ Puiku! UÅ¾duotis baigta!</h2>
            <div id="finalScore"></div>
            <div id="encouragement"></div>
        </div>
    </div>

<script>
const words = [
    {word: 'NAMAS', type: 'daiktavardis'}, {word: 'GRAÅ½US', type: 'budvardis'}, {word: 'BÄ–GA', type: 'veiksmaÅ¾odis'},
    {word: 'KNYGA', type: 'daiktavardis'}, {word: 'DIDELIS', type: 'budvardis'}, {word: 'SKAITO', type: 'veiksmaÅ¾odis'},
    {word: 'VAIKAS', type: 'daiktavardis'}, {word: 'MÄ–LYNAS', type: 'budvardis'}, {word: 'Å½AIDÅ½IA', type: 'veiksmaÅ¾odis'},
    {word: 'MAMA', type: 'daiktavardis'}, {word: 'Å ILTAS', type: 'budvardis'}, {word: 'EINA', type: 'veiksmaÅ¾odis'},
    {word: 'DRAUGAS', type: 'daiktavardis'}, {word: 'LINKSMAS', type: 'budvardis'}, {word: 'MOKO', type: 'veiksmaÅ¾odis'}
];

let draggedElement = null, correctAnswers = 0, checkedAnswers = false;
let touchElement = null, touchOffset = {x: 0, y: 0};
let isDragging = false, startPos = {x: 0, y: 0};

function handleTouchStart(e) {
    e.preventDefault();
    e.stopPropagation();
    
    touchElement = e.target;
    isDragging = false;
    
    const touch = e.touches[0];
    const rect = touchElement.getBoundingClientRect();
    touchOffset.x = touch.clientX - rect.left;
    touchOffset.y = touch.clientY - rect.top;
    startPos.x = touch.clientX;
    startPos.y = touch.clientY;
    
    // Vizualinis feedback
    touchElement.style.transition = 'none';
    touchElement.style.transform = 'scale(1.05)';
    touchElement.style.boxShadow = '0 8px 25px rgba(0,0,0,0.3)';
    
    // Highlight drop zones
    document.querySelectorAll('.drop-box').forEach(box => {
        box.style.borderColor = box.classList.contains('noun') ? '#2196f3' : 
                                box.classList.contains('adjective') ? '#4caf50' : '#f44336';
        box.style.borderWidth = '4px';
    });
}

function handleTouchMove(e) {
    if (!touchElement) return;
    e.preventDefault();
    e.stopPropagation();
    
    const touch = e.touches[0];
    const moveX = Math.abs(touch.clientX - startPos.x);
    const moveY = Math.abs(touch.clientY - startPos.y);
    
    // Start dragging only after significant movement
    if (!isDragging && (moveX > 10 || moveY > 10)) {
        isDragging = true;
        touchElement.style.position = 'fixed';
        touchElement.style.zIndex = '1000';
        touchElement.style.opacity = '0.9';
        touchElement.style.pointerEvents = 'none';
    }
    
    if (isDragging) {
        touchElement.style.left = (touch.clientX - touchOffset.x) + 'px';
        touchElement.style.top = (touch.clientY - touchOffset.y) + 'px';
        
        // Highlight current drop zone
        const elementBelow = document.elementFromPoint(touch.clientX, touch.clientY);
        const dropBox = elementBelow?.closest('.drop-box');
        
        document.querySelectorAll('.drop-box').forEach(box => {
            if (box === dropBox) {
                box.style.transform = 'scale(1.05)';
                box.style.borderStyle = 'solid';
            } else {
                box.style.transform = 'scale(1)';
                box.style.borderStyle = 'dashed';
            }
        });
    }
}

function handleTouchEnd(e) {
    if (!touchElement) return;
    e.preventDefault();
    e.stopPropagation();
    
    const touch = e.changedTouches[0];
    const elementBelow = document.elementFromPoint(touch.clientX, touch.clientY);
    const dropBox = elementBelow?.closest('.drop-box');
    
    // Reset all drop zones
    document.querySelectorAll('.drop-box').forEach(box => {
        box.style.borderWidth = '3px';
        box.style.borderStyle = 'dashed';
        box.style.transform = 'scale(1)';
    });
    
    if (isDragging && dropBox) {
        // Successfully dropped in a box
        const droppedWordsContainer = dropBox.querySelector('.dropped-words');
        
        if (touchElement.classList.contains('dropped-word')) {
            // Moving from one box to another
            const newDroppedWord = document.createElement('div');
            newDroppedWord.className = 'dropped-word';
            newDroppedWord.textContent = touchElement.textContent;
            newDroppedWord.dataset.type = touchElement.dataset.type;
            newDroppedWord.dataset.expectedType = dropBox.dataset.type;
            droppedWordsContainer.appendChild(newDroppedWord);
            touchElement.remove();
            
            // Success feedback
            dropBox.style.backgroundColor = '#e8f5e8';
            setTimeout(() => {
                dropBox.style.backgroundColor = '';
            }, 500);
        } else {
            // New word from pool
            const droppedWord = document.createElement('div');
            droppedWord.className = 'dropped-word';
            droppedWord.textContent = touchElement.textContent;
            droppedWord.dataset.type = touchElement.dataset.type;
            droppedWord.dataset.expectedType = dropBox.dataset.type;
            droppedWordsContainer.appendChild(droppedWord);
            touchElement.remove();
            
            // Success feedback
            dropBox.style.backgroundColor = '#e8f5e8';
            setTimeout(() => {
                dropBox.style.backgroundColor = '';
            }, 500);
        }
        
        addDragToDroppedWords();
        updateScore();
        updateProgress();
        
        if (document.querySelectorAll('.word-item').length === 0) {
            showFeedback('Visi Å¾odÅ¾iai surÅ«Å¡iuoti! Dabar patikrinkite atsakymus.', 'success');
        }
    } else {
        // Return to original position
        touchElement.style.transition = 'all 0.3s ease';
        touchElement.style.position = '';
        touchElement.style.zIndex = '';
        touchElement.style.opacity = '';
        touchElement.style.transform = '';
        touchElement.style.left = '';
        touchElement.style.top = '';
        touchElement.style.boxShadow = '';
        touchElement.style.pointerEvents = '';
        
        // Shake animation for failed drop
        if (isDragging) {
            touchElement.style.animation = 'shake 0.5s ease-in-out';
            setTimeout(() => {
                touchElement.style.animation = '';
            }, 500);
        }
    }
    
    touchElement = null;
    isDragging = false;
}

function addDragToDroppedWords() {
    document.querySelectorAll('.dropped-word').forEach(droppedWord => {
        if (!droppedWord.dataset.dragEnabled) {
            droppedWord.dataset.dragEnabled = 'true';
            droppedWord.draggable = true;
            droppedWord.style.cursor = 'grab';
            
            droppedWord.addEventListener('dragstart', e => { 
                draggedElement = e.target; 
                e.target.style.opacity = '0.5';
            });
            droppedWord.addEventListener('dragend', e => { 
                draggedElement = null; 
                e.target.style.opacity = '1';
            });
            droppedWord.addEventListener('touchstart', handleTouchStart, {passive: false});
            droppedWord.addEventListener('touchmove', handleTouchMove, {passive: false});
            droppedWord.addEventListener('touchend', handleTouchEnd, {passive: false});
        }
    });
}

function initGame() {
    const container = document.getElementById('wordsContainer');
    container.innerHTML = '';
    const shuffledWords = [...words].sort(() => Math.random() - 0.5);
    
    shuffledWords.forEach(wordData => {
        const wordElement = document.createElement('div');
        wordElement.className = 'word-item';
        wordElement.textContent = wordData.word;
        wordElement.draggable = true;
        wordElement.dataset.type = wordData.type;
        
        // Desktop drag events
        wordElement.addEventListener('dragstart', e => { draggedElement = e.target; });
        wordElement.addEventListener('dragend', e => { draggedElement = null; });
        
        // Mobile touch events
        wordElement.addEventListener('touchstart', handleTouchStart, {passive: false});
        wordElement.addEventListener('touchmove', handleTouchMove, {passive: false});
        wordElement.addEventListener('touchend', handleTouchEnd, {passive: false});
        
        container.appendChild(wordElement);
    });
    
    document.querySelectorAll('.drop-box').forEach(box => {
        box.addEventListener('dragover', e => e.preventDefault());
        box.addEventListener('drop', e => {
            e.preventDefault();
            if (draggedElement) {
                const dropBox = e.currentTarget.querySelector('.dropped-words');
                
                if (draggedElement.classList.contains('dropped-word')) {
                    const newDroppedWord = document.createElement('div');
                    newDroppedWord.className = 'dropped-word';
                    newDroppedWord.textContent = draggedElement.textContent;
                    newDroppedWord.dataset.type = draggedElement.dataset.type;
                    newDroppedWord.dataset.expectedType = e.currentTarget.dataset.type;
                    dropBox.appendChild(newDroppedWord);
                    draggedElement.remove();
                } else {
                    const droppedWord = document.createElement('div');
                    droppedWord.className = 'dropped-word';
                    droppedWord.textContent = draggedElement.textContent;
                    droppedWord.dataset.type = draggedElement.dataset.type;
                    droppedWord.dataset.expectedType = e.currentTarget.dataset.type;
                    dropBox.appendChild(droppedWord);
                    draggedElement.remove();
                }
                
                addDragToDroppedWords();
                updateScore();
                updateProgress();
                
                if (document.querySelectorAll('.word-item').length === 0) {
                    showFeedback('Visi Å¾odÅ¾iai surÅ«Å¡iuoti! Dabar patikrinkite atsakymus.', 'success');
                }
            }
        });
    });
    
    addDragToDroppedWords();
    updateScore();
    updateProgress();
}

function checkAnswers() {
    if (checkedAnswers) return;
    const droppedWords = document.querySelectorAll('.dropped-word');
    correctAnswers = 0;
    
    droppedWords.forEach(word => {
        if (word.dataset.type === word.dataset.expectedType) {
            word.classList.add('correct'); correctAnswers++;
        } else {
            word.classList.add('incorrect');
        }
    });
    
    checkedAnswers = true; updateScore();
    const percentage = Math.round((correctAnswers / words.length) * 100);
    const resultsDiv = document.getElementById('results');
    const finalScore = document.getElementById('finalScore');
    const encouragement = document.getElementById('encouragement');
    
    finalScore.innerHTML = `<div style="font-size: 32px; margin-bottom: 15px;">ğŸ¯</div>
        <div style="font-size: 22px; color: #1565c0;">Tavo rezultatas: ${correctAnswers}/${words.length} (${percentage}%)</div>`;
    
    if (percentage >= 80) {
        encouragement.innerHTML = `<div style="color: #27ae60; font-size: 18px; margin-top: 15px;">
            ğŸŒŸ Puiku! Tu puikiai moki rÅ«Å¡iuoti kalbos dalis!</div>`;
    } else if (percentage >= 60) {
        encouragement.innerHTML = `<div style="color: #f39c12; font-size: 18px; margin-top: 15px;">
            ğŸ‘ Gerai! Dar truputÄ¯ patreniruok!</div>`;
    } else {
        encouragement.innerHTML = `<div style="color: #e74c3c; font-size: 18px; margin-top: 15px;">
            ğŸ’ª Neblogai! Pabandyk dar kartÄ…!</div>`;
    }
    
    resultsDiv.classList.add('show');
    document.getElementById('checkBtn').disabled = true;
}

function updateScore() {
    const placedWords = document.querySelectorAll('.dropped-word').length;
    const accuracy = placedWords > 0 ? Math.round((correctAnswers / placedWords) * 100) : 0;
    document.getElementById('correctCount').textContent = correctAnswers;
    document.getElementById('totalWords').textContent = words.length;
    document.getElementById('accuracy').textContent = accuracy + '%';
}

function updateProgress() {
    const placedWords = document.querySelectorAll('.dropped-word').length;
    const progress = (placedWords / words.length) * 100;
    document.getElementById('progressFill').style.width = progress + '%';
}

function showFeedback(message, type) {
    const feedback = document.getElementById('feedback');
    feedback.textContent = message;
    feedback.className = `feedback show ${type}`;
    setTimeout(() => feedback.classList.remove('show'), 3000);
}

function resetGame() {
    document.querySelectorAll('.dropped-words').forEach(box => box.innerHTML = '');
    correctAnswers = 0; checkedAnswers = false;
    document.getElementById('checkBtn').disabled = false;
    document.getElementById('results').classList.remove('show');
    initGame();
}

document.addEventListener('DOMContentLoaded', initGame);
</script>

<style>
@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}
</style>

</body>
</html>

